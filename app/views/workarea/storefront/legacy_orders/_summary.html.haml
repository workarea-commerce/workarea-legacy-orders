.order-summary
  .order-summary__data
    .order-summary__data-section
      %h2= t('workarea.storefront.orders.addresses')
      %h3= t('workarea.storefront.orders.billing')
      %p
        = order.billing_address.first_name
        = order.billing_address.last_name
        - if order.billing_address.company.present?
          %br
          = order.billing_address.company
        %br
        = order.billing_address.street
        - if order.billing_address.street_2.present?
          %br
          = order.billing_address.street_2
        %br
        = order.billing_address.city
        = order.billing_address.region
        = order.billing_address.postal_code
        %br
        = number_to_phone order.billing_address.phone_number, extension: order.billing_address.phone_extension
      - if order.requires_shipping?
        %h3= t('workarea.storefront.orders.shipping')
        %p
          = order.shipping_address.first_name
          = order.shipping_address.last_name
          - if order.shipping_address.company.present?
            %br
            = order.shipping_address.company
          %br
          = order.shipping_address.street
          - if order.shipping_address.street_2.present?
            %br
            = order.shipping_address.street_2
          %br
          = order.shipping_address.city
          = order.shipping_address.region
          = order.shipping_address.postal_code
          %br
          = number_to_phone order.shipping_address.phone_number, extension: order.shipping_address.phone_extension

    .order-summary__data-section
      %h2= t('workarea.storefront.checkouts.shipping_options')
      - if order.requires_shipping?
        %h3= t('workarea.storefront.checkouts.shipping_method')
        %p= order.shipping_method
      - else
        %p= t('workarea.storefront.checkouts.not_applicable')

    .order-summary__data-section
      %h2= t('workarea.storefront.orders.payment')
      - order.tenders.each do |tender|
        = render "workarea/storefront/legacy_orders/tenders/#{tender.slug}", tender: tender

  %ul.product-list
    - order.items.each do |item|
      %li.product-list__item
        .product-list__item-cell
          .product-list__summary
            .product-list__info
              %p.product-list__id= item.sku_name
              .product-list__option-group
                - item.details.each do |name, value|
                  %p.product-list__option #{name.titleize}: #{value}
              - item.customizations.each do |name, value|
                %p.product-list__customization #{name.titleize}: #{value}
        .product-list__item-cell
          %table.table
            %thead
              %tr
                %th.table__quantity= t('workarea.storefront.orders.quantity')
                %th.table__prices= t('workarea.storefront.orders.total')
            %tbody
              %tr
                %td.table__quantity
                  %p= item.quantity
                %td.table__prices
                  %p.table__price
                    %span.table__price-label= t('workarea.storefront.orders.item_total')
                    %span= number_to_currency(item.total_price)

  %table.table.table--totals
    %tbody
      %tr
        %th
          %span= t('workarea.storefront.orders.subtotal')
        %td= number_to_currency(order.subtotal_price)
      - if order.requires_shipping?
        %tr
          %th
            %span= t('workarea.storefront.orders.shipping')
          %td= number_to_currency(order.shipping_total)

      %tr
        %th
          %span= t('workarea.storefront.orders.tax')
        %td= number_to_currency(order.tax_total)

      = append_partials('storefront.order_summary_payment', order: order)

      %tr.table__total
        %th
          %span= t('workarea.storefront.orders.total')
        %td= number_to_currency(order.total_price)

  %ul.order-help-menu
    %li.order-help-menu__item
      = link_to t('workarea.storefront.layouts.contact_us'), contact_path, data: { dialog_button: '' }
    %li.order-help-menu__item
      = link_to page_path('shipping-information'), target: '_blank', data: { dialog_button: '' } do
        = t('workarea.storefront.layouts.shipping_policy')
    %li.order-help-menu__item
      = link_to page_path('return-information'), target: '_blank', data: { dialog_button: '' } do
        = t('workarea.storefront.layouts.returns')
